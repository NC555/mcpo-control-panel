<!-- ================================================ -->
<!-- FILE: src/mcp_manager_ui/ui/templates/bulk_add_form.html -->
<!-- (Переделано под Materialize CSS) -->
<!-- ================================================ -->
{% extends "base.html" %}

{% block title %}Массовое добавление - MCP Менеджер{% endblock %}
{% block page_title %}Массовое добавление серверов из JSON{% endblock %}
{% block page_subtitle %}Вставьте JSON конфигурацию для добавления нескольких определений{% endblock %}

{% block content %}

{% if error %}
<div class="card-panel red lighten-3 black-text">
    <strong>Ошибка:</strong> {{ error }}
</div>
{% endif %}
{% if success_count is not none and success_count > 0 %}
<div class="card-panel green lighten-3 black-text">
    <strong>Успешно:</strong> Добавлено {{ success_count }} определений серверов. <a href="{{ url_for('ui_root') }}">Вернуться к списку</a>.
</div>
{% elif success_count is not none and success_count == 0 and not error %}
<div class="card-panel orange lighten-3 black-text">
    <strong>Заметьте:</strong> Новые определения серверов не были добавлены (возможно, они уже существуют или JSON пуст/некорректен).
</div>
{% endif %}


<div class="row">
    <form class="col s12" method="post" action="{{ url_for('ui_process_bulk_add') }}">
        <div class="row">
            <div class="input-field col s12">
                 <i class="material-icons prefix">data_object</i>
                 <textarea id="configJsonStr" name="configJsonStr" class="materialize-textarea" style="height: 250px;" required placeholder='Пример 1 (с оберткой "mcpServers"):\n{\n  "mcpServers": {\n    "my-tool-name": {\n      "command": "npx",\n      "args": ["some-package"],\n      "env": {"API_KEY": "secret"}\n    }\n  }\n}\n\nПример 2 (прямое отображение):\n{\n  "another-tool": {\n    "type": "sse",\n    "url": "http://localhost:8001/sse"\n  }\n}'>{{ config_json_str if config_json_str else '' }}</textarea>
                 <label for="configJsonStr">Конфигурация MCP Серверов (JSON)</label>
                 <span class="helper-text">
                    Вставьте JSON вида <code>{"mcpServers": {"name1": {...}, ...}}</code> или <code>{"name1": {...}, "name2": {...}}</code>.
                    Имена серверов станут уникальными идентификаторами в UI.
                 </span>
            </div>
        </div>
         <div class="row">
            <div class="col s12">
                <div class="switch">
                    <label>
                        Добавить выключенными
                        <input type="checkbox" id="default_enabled" name="default_enabled" value="true">
                        <span class="lever"></span>
                        Добавить включенными
                    </label>
                </div>
            </div>
         </div>

        <div class="row" style="margin-top: 30px;">
            <div class="col s12">
                 <button class="btn waves-effect waves-light blue darken-1" type="submit">
                     <i class="material-icons left">playlist_add</i>Добавить из JSON
                 </button>
                 <a href="{{ url_for('ui_root') }}" class="btn waves-effect waves-light grey lighten-1 black-text">
                      <i class="material-icons left">cancel</i>Отмена
                 </a>
            </div>
        </div>
    </form>
</div>
{% endblock %}